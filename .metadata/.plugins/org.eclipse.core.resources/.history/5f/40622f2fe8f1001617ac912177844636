package org.fmaes.simulinktotimedautomata.platformextender.blockroutinegenerator.abs;

import java.util.Iterator;

import org.fmaes.simulinktotimedautomata.blockroutinegenerator.BlockRoutineGeneratorInterface;
import org.fmaes.simulinktotimedautomata.types.wrappers.Predecessor;
import org.fmaes.simulinktotimedautomata.types.wrappers.SimulinkBlockWrapper;

public class Abs implements BlockRoutineGeneratorInterface {

  @Override
  public String generateBlockRoutine(SimulinkBlockWrapper blockForParsing) {
    // TODO Auto-generated method stub
    String outSignal = blockForParsing.getSignalName();
    Iterator<Predecessor> iter = blockForParsing.predecessors.iterator();
    Predecessor p = null;
    if (iter.hasNext()) {
      p = (Predecessor) iter.next();
    }
    String inSignal = "";
    if (p != null) {
      inSignal = p.getSimulinkBlock().getSignalName();
    }
    return "void blockRoutine(){\n #out# = #in#;\n if(#out# < 0){\n #out# = #out# * -1; \n}\n }"
        .replace("#out#", outSignal).replaceAll("#in#", inSignal);
  }

}
